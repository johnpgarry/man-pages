.\" Copyright (c) 2001-2003 The Open Group, All Rights Reserved 
.TH "socketpair" P 2003 POSIX
.\" socketpair 
.SH NAME
socketpair - create a pair of connected sockets
.SH SYNOPSIS
.LP
\fB#include <sys/socket.h>
.br
.sp
int socketpair(int\fP \fIdomain\fP\fB, int\fP \fItype\fP\fB, int\fP
\fIprotocol\fP\fB,
.br
\0\0\0\0\0\0 int\fP \fIsocket_vector\fP\fB[2]);
.br
\fP
.SH DESCRIPTION
.LP
The \fIsocketpair\fP() function shall create an unbound pair of connected
sockets in a specified \fIdomain\fP, of a specified
\fItype\fP, under the protocol optionally specified by the \fIprotocol\fP
argument. The two sockets shall be identical. The file
descriptors used in referencing the created sockets shall be returned
in \fIsocket_vector\fP[0] and \fIsocket_vector\fP[1].
.LP
The \fIsocketpair\fP() function takes the following arguments:
.TP
\fIdomain\fP
Specifies the communications domain in which the sockets are to be
created.
.TP
\fItype\fP
Specifies the type of sockets to be created.
.TP
\fIprotocol\fP
Specifies a particular protocol to be used with the sockets. Specifying
a \fIprotocol\fP of 0 causes \fIsocketpair\fP() to
use an unspecified default protocol appropriate for the requested
socket type.
.TP
\fIsocket_vector\fP
Specifies a 2-integer array to hold the file descriptors of the created
socket pair.
.sp
.LP
The \fItype\fP argument specifies the socket type, which determines
the semantics of communications over the socket. The
following socket types are defined; implementations may specify additional
socket types:
.TP
SOCK_STREAM
Provides sequenced, reliable, bidirectional, connection-mode byte
streams, and may provide a transmission mechanism for
out-of-band data.
.TP
SOCK_DGRAM
Provides datagrams, which are connectionless-mode, unreliable messages
of fixed maximum length.
.TP
SOCK_SEQPACKET
Provides sequenced, reliable, bidirectional, connection-mode transmission
paths for records. A record can be sent using one or
more output operations and received using one or more input operations,
but a single operation never transfers part of more than
one record. Record boundaries are visible to the receiver via the
MSG_EOR flag.
.sp
.LP
If the \fIprotocol\fP argument is non-zero, it shall specify a protocol
that is supported by the address family. If the
\fIprotocol\fP argument is zero, the default protocol for this address
family and type shall be used. The protocols supported by
the system are implementation-defined.
.LP
The process may need to have appropriate privileges to use the \fIsocketpair\fP()
function or to create some sockets.
.SH RETURN VALUE
.LP
Upon successful completion, this function shall return 0; otherwise,
-1 shall be returned and \fIerrno\fP set to indicate the
error.
.SH ERRORS
.LP
The \fIsocketpair\fP() function shall fail if:
.TP
.B EAFNOSUPPORT
.sp
The implementation does not support the specified address family.
.TP
.B EMFILE
No more file descriptors are available for this process.
.TP
.B ENFILE
No more file descriptors are available for the system.
.TP
.B EOPNOTSUPP
The specified protocol does not permit creation of socket pairs.
.TP
.B EPROTONOSUPPORT
.sp
The protocol is not supported by the address family, or the protocol
is not supported by the implementation.
.TP
.B EPROTOTYPE
The socket type is not supported by the protocol.
.sp
.LP
The \fIsocketpair\fP() function may fail if:
.TP
.B EACCES
The process does not have appropriate privileges.
.TP
.B ENOBUFS
Insufficient resources were available in the system to perform the
operation.
.TP
.B ENOMEM
Insufficient memory was available to fulfill the request.
.sp
.LP
\fIThe following sections are informative.\fP
.SH EXAMPLES
.LP
None.
.SH APPLICATION USAGE
.LP
The documentation for specific address families specifies which protocols
each address family supports. The documentation for
specific protocols specifies which socket types each protocol supports.
.LP
The \fIsocketpair\fP() function is used primarily with UNIX domain
sockets and need not be supported for other domains.
.SH RATIONALE
.LP
None.
.SH FUTURE DIRECTIONS
.LP
None.
.SH SEE ALSO
.LP
\fIsocket\fP() , the Base Definitions volume of IEEE\0Std\01003.1-2001,
\fI<sys/socket.h>\fP
.SH COPYRIGHT
Portions of this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information Technology
-- Portable Operating System Interface (POSIX), The Open Group Base
Specifications Issue 6, Copyright (C) 2001-2003 by the Institute of
Electrical and Electronics Engineers, Inc and The Open Group. In the
event of any discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open Group Standard
is the referee document. The original Standard can be obtained online at
http://www.opengroup.org/unix/online.html .
